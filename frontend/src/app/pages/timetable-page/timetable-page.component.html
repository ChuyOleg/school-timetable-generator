<h3 class="font-bold text-center mt-3 mb-5">Timetable</h3>

<div class="text-center mt-5" *ngIf="!isGenerated">
  <button
    type="button"
    class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold
       hover:text-white py-2 px-4 border border-2 border-blue-500 hover:border-transparent rounded"
    (click)="generate()"
  >
    Generate
  </button>
</div>

<app-invalid-working-loading-block *ngIf="teachersWithInvalidLoading.length > 0"
  [teachersWithInvalidLoading]="teachersWithInvalidLoading"
></app-invalid-working-loading-block>

<div class="mt-8" *ngIf="isGenerated">

  <div class="text-center">
    <label class="relative inline-flex items-center mb-5 cursor-pointer">
      <input type="checkbox" class="sr-only peer" (click)="toggleViewState()">
      <div class="w-11 h-6 bg-gray-200 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full
        peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px]
        after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5
        after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"
      ></div>
      <span class="ml-3 text-sm font-medium text-gray-400 dark:text-gray-500">View</span>
    </label>
  </div>

  <div class="w-full text-sm flex">
    <div class="font-bold border border-4">
      <div class="py-2"><br></div>

      <div *ngFor="let day of days">

        <div class="flex">
          <div class="w-[100px] text-center">{{ day }}</div>

          <div>
            <div *ngFor="let lessonNumber of nums"
              class="pr-3 border border-1 border-white">
              {{ lessonNumber }}
            </div>
            <br>
          </div>

        </div>

      </div>
    </div>

    <div class="overflow-x-scroll border border-4 flex">
      <div *ngFor="let entry of timetableByGroups | keyvalue: sortByGradeNumberAndLetter">
        <app-group-timetable-block
          [lessons]="entry.value"
          [timeslotsById]="timeslotsById"
          [group]="groupsById[entry.value[0].groupId]"
          [subjectsById]="subjectsById"
          [teachersById]="teachersById"
          [viewState]="viewState"
        ></app-group-timetable-block>
      </div>
    </div>
  </div>

</div>

<div class="text-center mt-5" *ngIf="isGenerated">
  <button
    type="button"
    class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold
       hover:text-white py-2 px-4 border border-2 border-blue-500 hover:border-transparent rounded"
    (click)="save()"
  >
    Save
  </button>
</div>
